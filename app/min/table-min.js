table={},table.linkPixelPerSecond=1,table.linkWidthMin=1.5,table.linkWidthMax=40,table.makeJsPlumb=function(){jsPlumb.ready(function(){jsPlumb.importDefaults({PaintStyle:{lineWidth:40,strokeStyle:"#444"},Connector:"Straight",ConnectionsDetachable:!1,Container:"plumbdiv"});var t=jsPlumb.getSelector(".person");jsPlumb.batch(function(){for(var e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var n=t[e].id.split("-")[1],i=t[a].id.split("-")[1];if(n!=i&&i>n)var o=jsPlumb.connect({source:t[e],target:t[a],anchor:"Center",endpoint:"Rectangle",cssClass:"link link-"+n+"-"+i})}}),$(".link path").each(function(){$(this).attr("stroke-width",table.linkWidthMin)})})},table.makeTable=function(){_.forEach(people.getData(),function(t,e){var a=$("<div class='person'></div>"),n=$("<div class='person-inner'></div>"),i=$("<div class='initials'></div>");i.html(e.toUpperCase());var o=$("<div class='firstname'></div>");o.html(e),o.html(t.name.split(" ")[0]),i.appendTo(n),o.appendTo(n),n.appendTo(a),a.attr("name",e.toUpperCase()),a.attr("id","person-"+e.toUpperCase()),a.addClass("person-"+e.toUpperCase()),a.appendTo("#persondiv"),a.addClass("draggable")})},table.updateLinks=function(){var t=timekeeper.getMaxLinkDuration();_.forEach(people.listOfNames,function(e){_.forEach(people.listOfNames,function(a){if(e!=a&&a>e){var n=$(".link-"+e+"-"+a+" path"),i=timekeeper.getLinkDurationsUni(e,a),o=helpers.mapRange([0,t],[table.linkWidthMin,table.linkWidthMax],i);n.attr("stroke-width",o)}})})},table.linkDurationToPixel=function(t){return t/1e3/table.linkPixelPerSecond},table.promptSaveLocations=function(){var t={};$(".person").each(function(e,a){var n=$(a).offset(),i=$(a).attr("name");t[i]=n}),alert(JSON.stringify(t))},table.promptLoadLocations=function(){var t=prompt("input Location String?");table.loadLocations(t)},table.loadLocations=function(t){locations=JSON.parse(t),console.log(locations),_.forEach(locations,function(t,e){$(".person-"+e).offset(t)})},table.start=function(){table.makeTable(),table.makeJsPlumb()};