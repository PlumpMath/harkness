table={},table.linkPixelPerSecond=1,table.linkWidthMin=.75,table.linkWidthMax=30,table.linkColor="#000",table.responseColor="#B0851C",table.showWeights=!0,table.linkWidthNoWeightSpoken=7,table.linkColorNoWeight="rgba(100,100,100,200)",table.makeJsPlumb=function(){jsPlumb.ready(function(){jsPlumb.importDefaults({PaintStyle:{lineWidth:40,strokeStyle:"#000"},Connector:"Straight",ConnectionsDetachable:!1,Container:"plumbdiv"});var t=jsPlumb.getSelector(".person");jsPlumb.draggable(t),jsPlumb.setDraggable(jsPlumb.getSelector(".person"),!1),jsPlumb.batch(function(){for(var e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var l=t[e].id.split("-")[1],n=t[a].id.split("-")[1];if(l!=n&&n>l)var o=jsPlumb.connect({source:t[e],target:t[a],anchor:"Center",endpoint:"Rectangle",cssClass:"link link-"+l+"-"+n})}}),$(".link path").each(function(){$(this).attr("stroke-width",table.linkWidthMin),$(this).attr("stroke-style",table.linkColor)})})},table.makeTable=function(){_.forEach(people.getData(),function(t,e){var a=$("<div class='person'></div>"),l=$("<div class='person-inner'></div>"),n=$("<div class='initials'></div>");n.html(e.toUpperCase());var o=$("<div class='firstname'></div>");o.html(e),o.html(t.name.split(" ")[0]),n.appendTo(l),o.appendTo(l),l.appendTo(a),a.attr("name",e.toUpperCase()),a.attr("id","person-"+e.toUpperCase()),a.addClass("person-"+e.toUpperCase()),a.appendTo("#persondiv"),a.addClass("draggable")})},table.toggleWeights=function(){table.showWeights=!table.showWeights,table.updateLinks()},table.updateLinks=function(t,e,a){if(console.log(t,e,a),e>t)var l=t,n=e;else var l=e,n=t;var o=timekeeper.getMaxLinkDuration();_.forEach(people.listOfNames,function(t){_.forEach(people.listOfNames,function(e){if(t!=e&&e>t){var a=$(".link-"+t+"-"+e+" path"),i=timekeeper.getLinkDurationsUni(t,e);if(table.showWeights){var r=helpers.mapRange([0,o],[table.linkWidthMin,table.linkWidthMax],i);a.attr("stroke-width",r),t==l&&e==n?a.attr("stroke",table.responseColor):a.attr("stroke",table.linkColor)}else t==l&&e==n?(a.attr("stroke",table.responseColor),a.attr("stroke-width",table.linkWidthNoWeightSpoken)):(a.attr("stroke",table.linkColor),a.attr("stroke-width",table.linkWidthMin))}})})},table.linkDurationToPixel=function(t){return t/1e3/table.linkPixelPerSecond},table.promptSaveLocations=function(){var t={};$(".person").each(function(e,a){var l=$(a).offset(),n=$(a).attr("name");t[n]=l}),alert(JSON.stringify(t))},table.promptLoadLocations=function(){var t=prompt("input Location String?");table.loadLocations(t)},table.loadLocations=function(t){locations=JSON.parse(t),console.log(locations),_.forEach(locations,function(t,e){$(".person-"+e).offset(t)}),jsPlumb.repaintEverything(),table.updateLinks()},table.start=function(){table.makeAll()},table.makeAll=function(){table.makeTable(),table.makeJsPlumb()};